if (self.CavalryLogger) { CavalryLogger.start_js(["7vSZE"]); }

__d("FBRTCCallBlockingStore",["Arbiter","AsyncRequest","ChannelConstants","FBRTCDispatcher","FBRTCStore","VideoCallTypedLogger","clearTimeout","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=!1,i=0,j=null,k="call_block_setting_changed";g=babelHelpers.inherits(a,b("FBRTCStore"));g&&g.prototype;a.prototype.init=function(a){this.$FBRTCCallBlockingStore1(a),b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("videocall_block_setting"),this.$FBRTCCallBlockingStore2.bind(this))};a.prototype.__onDispatch=function(a){if(a.type!==k)return;this.$FBRTCCallBlockingStore1(a.data)};a.prototype.$FBRTCCallBlockingStore1=function(a){switch(a){case 0:h=!1;this.$FBRTCCallBlockingStore3();break;case-1:h=!0;this.$FBRTCCallBlockingStore3();break;default:h=!0,this.$FBRTCCallBlockingStore4(a)}this.__emitChange()};a.prototype.$FBRTCCallBlockingStore4=function(a){j===null&&(j=b("setTimeoutAcrossTransitions")(this.turnOnVideoCalling.bind(this),a*1e3))};a.prototype.getBlockingStatus=function(){return h};a.prototype.turnOnVideoCalling=function(){new(b("AsyncRequest"))("/ajax/chat/settings.php").setHandler(this.$FBRTCCallBlockingStore5.bind(this)).setData({call_blocked_until:0}).send()};a.prototype.turnOffVideoCalling=function(a){i=a,new(b("AsyncRequest"))("/ajax/chat/settings.php").setHandler(this.$FBRTCCallBlockingStore6.bind(this)).setData({call_blocked_until:a}).send()};a.prototype.$FBRTCCallBlockingStore3=function(){j&&(b("clearTimeout")(j),j=null)};a.prototype.$FBRTCCallBlockingStore5=function(){b("FBRTCDispatcher").dispatch({type:k,data:0}),new(b("VideoCallTypedLogger"))().setEvent(k).setMessage("enable").log()};a.prototype.$FBRTCCallBlockingStore6=function(){b("FBRTCDispatcher").dispatch({type:k,data:i}),new(b("VideoCallTypedLogger"))().setEvent(k).setMessage("disable_"+i).log()};a.prototype.$FBRTCCallBlockingStore2=function(a,c){b("FBRTCDispatcher").dispatch({type:k,data:c.obj.value})};function a(){g.apply(this,arguments)}e.exports=new a()}),null);