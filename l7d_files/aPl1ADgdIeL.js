if (self.CavalryLogger) { CavalryLogger.start_js(["oFhfq"]); }

__d("AdsStockImageSourceDataLoaderV2",["AdsAPIShutterstockImageFields","AdsGraphAPI","AdsImageIDClasses","AdsStockImageSourceImageListLoadedAction","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=25,h=b("AdsImageIDClasses").AdsImageID;b("AdsImageIDClasses").AdsShutterstockImageID;var i=[b("AdsAPIShutterstockImageFields").ID,b("AdsAPIShutterstockImageFields").PREVIEW,b("AdsAPIShutterstockImageFields").PREVIEW_URL,b("AdsAPIShutterstockImageFields").THUMBNAIL];function a(){__p&&__p();this.loadOne=function(a){return this.sendRequestForOneImage(a).then(function(a){a=a;return{stockImageID:a.id,preview:a.preview,thumbnail:a.thumbnail,fullSizeURL:a.preview_url}})}.bind(this),this.load=function(a,c){return this.sendRequest(a,c).then(function(a){a=this.handleResponse(a);var c=a.imageIDs,d=a.imageDataList;a=a.after;b("AdsStockImageSourceImageListLoadedAction").dispatch({imageIDList:c,imageDataList:d});return{imageIDs:b("immutable").OrderedSet(c),after:a}}.bind(this))}.bind(this)}a.prototype.sendRequestForOneImage=function(a){a=a.getShutterstockImageID();return b("AdsGraphAPI").get(e.id).root(a).get({fields:i})};a.prototype.sendRequest=function(a,c){return b("AdsGraphAPI").get(e.id).search("adstockimage").get({limit:g,locale:"user",q:a,after:c})};a.prototype.handleResponse=function(a){var b,c=a.data,d=c.map(function(a){return h.fromShutterstockID(a.id)});c=c.map(function(a){return{stockImageID:a.id,preview:a.preview,thumbnail:a.thumbnail}});b=(a==null?void 0:(b=a.paging)==null?void 0:b.next)?(b=a.paging)==null?void 0:(a=b.cursors)==null?void 0:a.after:undefined;return{imageIDs:d,imageDataList:c,after:b}};e.exports=new a()}),null);