if (self.CavalryLogger) { CavalryLogger.start_js(["dgOEz"]); }

__d("AdsAdgroupCanvasLinkValidator",["errorCode","errorDesc","fbt","AdsAbstractValidator","AdsAPIAdgroupPaths","AdsAPICampaignGroupPaths","AdsAPICampaignPaths","AdsAPIOptimizationGoals","AdsAppUtils","AdsCanvasAdUtils","AdsCanvasCollectionsConstants","AdsCollectionsAdUtils","AdsError","AdsPromotedObjectTypes","expandPaths","getByPath"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j;j=babelHelpers.inherits(a,b("AdsAbstractValidator"));j&&j.prototype;a.prototype.getDependencies=function(){return{adgroup:b("expandPaths")([b("AdsAPIAdgroupPaths").CREATIVE.OBJECT_STORY_SPEC.LINK_DATA.LINK,b("AdsAPIAdgroupPaths").CREATIVE.OBJECT_STORY_SPEC.TEMPLATE_DATA.LINK,b("AdsAPIAdgroupPaths").CREATIVE.OBJECT_STORY_SPEC.VIDEO_DATA.CALL_TO_ACTION.VALUE.LINK,b("AdsAPIAdgroupPaths").CREATIVE.OBJECT_TYPE,b("AdsAPIAdgroupPaths").CREATIVE.OBJECT_STORY_SPEC.LINK_DATA.RETAILER_ITEM_IDS,b("AdsAPIAdgroupPaths").CREATIVE.OBJECT_STORY_SPEC.TEMPLATE_DATA.RETAILER_ITEM_IDS,b("AdsAPIAdgroupPaths").CREATIVE.OBJECT_STORY_SPEC.VIDEO_DATA.RETAILER_ITEM_IDS,b("AdsAPIAdgroupPaths").CREATIVE.OBJECT_STORY_SPEC.LINK_DATA.COLLECTION_THUMBNAILS,b("AdsAPIAdgroupPaths").CREATIVE.OBJECT_STORY_SPEC.TEMPLATE_DATA.COLLECTION_THUMBNAILS,b("AdsAPIAdgroupPaths").CREATIVE.OBJECT_STORY_SPEC.VIDEO_DATA.COLLECTION_THUMBNAILS]),campaign:b("expandPaths")([b("AdsAPICampaignPaths").OPTIMIZATION_GOAL,b("AdsAPICampaignPaths").PROMOTED_OBJECT.OBJECT_STORE_URL,b("AdsAPICampaignPaths").PROMOTED_OBJECT.path,b("AdsAPICampaignPaths").PROMOTED_OBJECT.APPLICATION_ID,b("AdsAPICampaignPaths").PROMOTED_OBJECT.OBJECT_STORE_URL]),campaignGroup:b("expandPaths")([b("AdsAPICampaignGroupPaths").OBJECTIVE,b("AdsAPICampaignGroupPaths").PROMOTED_OBJECT.PAGE_ID]),canvas:undefined,promotedObjectType:null}};a.prototype.shouldValidate=function(a){var c=a.adgroup;a.campaign;var d=a.campaignGroup;a.canvas;a=a.promotedObjectType;d=b("getByPath")(d,b("AdsAPICampaignGroupPaths").OBJECTIVE);c=b("getByPath")(c,b("AdsAPIAdgroupPaths").CREATIVE.OBJECT_STORY_SPEC.LINK_DATA.LINK)||b("getByPath")(c,b("AdsAPIAdgroupPaths").CREATIVE.OBJECT_STORY_SPEC.TEMPLATE_DATA.LINK)||b("getByPath")(c,b("AdsAPIAdgroupPaths").CREATIVE.OBJECT_STORY_SPEC.VIDEO_DATA.CALL_TO_ACTION.VALUE.LINK);a=a||b("AdsPromotedObjectTypes").NONE;return b("AdsCanvasAdUtils").isCanvasValidationSupported(d,a)&&b("AdsCanvasAdUtils").isCanvasLink(c)};a.prototype.validate=function(a){__p&&__p();var c=a.adgroup,d=a.campaign,e=a.campaignGroup;a=a.canvas;var f=[],g=b("getByPath")(c,b("AdsAPIAdgroupPaths").CREATIVE.OBJECT_STORY_SPEC.LINK_DATA.LINK)||b("getByPath")(c,b("AdsAPIAdgroupPaths").CREATIVE.OBJECT_STORY_SPEC.TEMPLATE_DATA.LINK)||b("getByPath")(c,b("AdsAPIAdgroupPaths").CREATIVE.OBJECT_STORY_SPEC.VIDEO_DATA.CALL_TO_ACTION.VALUE.LINK),h=b("getByPath")(d,b("AdsAPICampaignPaths").OPTIMIZATION_GOAL);h===b("AdsAPIOptimizationGoals").LANDING_PAGE_VIEWS&&f.push(this.$AdsAdgroupCanvasLinkValidator1());b("AdsCanvasAdUtils").isEmptyCanvasLink(g)&&f.push(this.$AdsAdgroupCanvasLinkValidator2());h=b("getByPath")(e,b("AdsAPICampaignGroupPaths").OBJECTIVE);if(b("AdsAppUtils").isMobileAppObjective(h)){g=b("getByPath")(d,b("AdsAPICampaignPaths").PROMOTED_OBJECT.OBJECT_STORE_URL);a&&a.store_url&&g&&a.store_url!==g&&f.push(this.$AdsAdgroupCanvasLinkValidator3())}e=b("AdsCollectionsAdUtils").getCollectionThumbnails(c.creative);e&&!e.isEmpty()&&a&&e.count()<b("AdsCanvasCollectionsConstants").MAX_COLLECTION_THUMBNAILS&&f.push(this.$AdsAdgroupCanvasLinkValidator4());return f};a.prototype.$AdsAdgroupCanvasLinkValidator4=function(){return new(b("AdsError"))(2131023,h._(function(a,b){return a._("This Canvas does not contain enough photos for collection.")},{}),{level:b("AdsError").Level.WARN,path:b("AdsAPIAdgroupPaths").CREATIVE.OBJECT_STORY_SPEC.LINK_DATA.CANVAS})};a.prototype.$AdsAdgroupCanvasLinkValidator1=function(){return new(b("AdsError"))(1815816,h._(function(a,b){return a._("Canvas and the collection format aren't supported for the landing page views optimization. Select a different optimization or a different format.")},{}),{level:b("AdsError").Level.WARN,path:b("AdsAPICampaignPaths").OPTIMIZATION_GOAL})};a.prototype.$AdsAdgroupCanvasLinkValidator2=function(){return new(b("AdsError"))(2131024,h._(function(a,b){return a._("You haven't selected a Canvas for your ad. Please select a Canvas to use, or create a new one.")},{}),{level:b("AdsError").Level.WARN,path:b("AdsAPIAdgroupPaths").CREATIVE.OBJECT_STORY_SPEC.LINK_DATA.CANVAS})};a.prototype.$AdsAdgroupCanvasLinkValidator3=function(){return new(b("AdsError"))(1885031,i._("Canvas needs to be associated with same app as the ad"),{level:b("AdsError").Level.WARN,path:b("AdsAPIAdgroupPaths").CREATIVE.OBJECT_STORY_SPEC.LINK_DATA.CANVAS})};function a(){j.apply(this,arguments)}e.exports=new a()}),null);